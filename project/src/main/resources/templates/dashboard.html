<!-- SEÇÃO CORRIGIDA: Continue Sua Jornada -->
<section th:if="${not #lists.isEmpty(dashboardData.quizzesEmProgresso)}">
    <h3 class="section-title">Continue Sua Jornada</h3>
    <div class="scroll-container">
        <a th:each="quiz : ${dashboardData.quizzesEmProgresso}" th:href="@{/quiz/{id}(id=${quiz.id})}" class="quiz-card-link">
            <div class="dashboard-card quiz-card">
                <h4 class="quiz-card-title" th:text="${quiz.titulo}"></h4>
                <p class="small text-secondary mb-2" th:text="${quiz.categoria}"></p>
                <!-- CORRIGIDO: Usa método getCorProgresso() do DTO -->
                <div class="progress" role="progressbar" th:attr="aria-valuenow=${quiz.progresso}" aria-valuemin="0" aria-valuemax="100">
                    <div class="progress-bar" th:classappend="${quiz.corProgresso}" th:style="'width: ' + ${quiz.progresso} + '%'"></div>
                </div>
                <!-- CORRIGIDO: Usa método getTextoProgresso() do DTO -->
                <span class="small text-secondary mt-1 d-block" th:text="${quiz.textoProgresso}"></span>
            </div>
        </a>
    </div>
</section>

<!-- SEÇÃO CORRIGIDA: Novos Desafios Para Você -->
<section th:if="${not #lists.isEmpty(dashboardData.novosQuizzes)}">
    <h3 class="section-title">Novos Desafios Para Você</h3>
    <div class="scroll-container">
        <a th:each="quiz : ${dashboardData.novosQuizzes}" th:href="@{/quiz/{id}(id=${quiz.id})}" class="quiz-card-link">
            <div class="dashboard-card quiz-card">
                <h4 class="quiz-card-title" th:text="${quiz.titulo}"></h4>
                <p class="small text-secondary mb-2" th:text="${quiz.categoria}"></p>
                <!-- ADICIONADO: Mostra tempo estimado para quizzes novos -->
                <div class="d-flex justify-content-between align-items-center mb-2">
                    <span class="badge bg-light text-dark" th:if="${quiz.tempoEstimado}" th:text="${quiz.tempoEstimado}">~5 min</span>
                    <span class="badge" th:classappend="${quiz.status.name() == 'NOVO' ? 'bg-primary' : (quiz.status.name() == 'EM_PROGRESSO' ? 'bg-warning' : 'bg-success')}" 
                          th:text="${quiz.status.descricao}">Novo</span>
                </div>
                <div class="mt-auto pt-2">
                    <!-- CORRIGIDO: Texto dinâmico baseado no status -->
                    <span class="btn btn-outline-primary btn-sm" th:text="${quiz.isNovo() ? 'Iniciar Quiz' : quiz.textoProgresso}">Iniciar Quiz</span>
                </div>
            </div>
        </a>
    </div>
</section>

<!-- SEÇÃO ADICIONAL: Quizzes Concluídos (nova funcionalidade) -->
<section th:if="${not #lists.isEmpty(dashboardData.quizzesEmProgresso)} and ${dashboardData.quizzesConcluidos > 0}">
    <h3 class="section-title">Quizzes Concluídos Recentemente</h3>
    <div class="scroll-container">
        <div th:each="quiz : ${dashboardData.quizzesEmProgresso}" th:if="${quiz.isConcluido()}" class="dashboard-card quiz-card completed-quiz">
            <h4 class="quiz-card-title" th:text="${quiz.titulo}"></h4>
            <p class="small text-secondary mb-2" th:text="${quiz.categoria}"></p>
            <!-- Barra de progresso para quizzes concluídos -->
            <div class="progress" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100">
                <div class="progress-bar bg-success" style="width: 100%"></div>
            </div>
            <div class="d-flex justify-content-between align-items-center mt-2">
                <span class="small text-success fw-bold" th:text="${quiz.textoProgresso}">Concluído</span>
                <span class="badge bg-success">
                    <i class="bi bi-check-circle-fill me-1"></i>
                    <span th:text="${quiz.pontuacaoObtida} + ' pts'">100 pts</span>
                </span>
            </div>
        </div>
    </div>
</section>